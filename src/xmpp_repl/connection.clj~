(ns xmpp-repl.connection)

(def connections (agent {}))

(defn connections-as-list []
  (map #(:connection (nth %1 1)) @connections))

(defn add-connection [connection]
  (send connections conj {email {:connection connection}}))

(defn remove-connection [email]
  (send connections dissoc email))